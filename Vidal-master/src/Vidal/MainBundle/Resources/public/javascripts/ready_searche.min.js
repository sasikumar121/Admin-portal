$(document).ready(function(){var e=$("#searche_form");e.find(".search-query").autocomplete({minLength:2,source:function(e,t){$.ajax({url:"https://www.vidal.ru:9200/website/autocompleteext/_search",type:"POST",dataType:"JSON",data:'{ "query":{"query_string":{"query":"'+e.term+'*"}}, "fields":["name"], "size":15, "highlight":{"fields":{"name":{}}} }',success:function(e){t($.map(e.hits.hits,function(e){return{label:e.highlight.name,value:e.fields.name}}))}})}}).data("ui-autocomplete")._renderItem=function(e,t){return $("<li></li>").data("item.autocomplete",t).append("<a>"+t.label+"</a>").appendTo(e)};e.find(".search-type").chosen({disable_search:true});$("#searche_nozology").autocomplete({minLength:2,source:function(e,t){$.ajax({url:"https://www.vidal.ru:9200/website/autocomplete_nozology/_search",type:"POST",dataType:"JSON",data:'{ "query":{"query_string":{"query":"'+e.term+'*"}}, "fields":["name","code"], "size":15, "highlight":{"fields":{"name":{}}} }',success:function(e){t($.map(e.hits.hits,function(e){return{label:e.highlight.name,value:e.fields.name,code:e.fields.code}}))}})},select:function(e,t){$(this.nextElementSibling).append("<li><i></i><span>"+t.item.value+"</span><b>"+t.item.code+"</b></li>")},close:function(e,t){this.value=""}}).data("ui-autocomplete")._renderItem=function(e,t){return $("<li></li>").data("item.autocomplete",t).append("<a>"+t.label+"</a>").appendTo(e)};$("#searche_contraindication").autocomplete({minLength:2,source:function(e,t){$.ajax({url:"https://www.vidal.ru:9200/website/autocomplete_contraindication/_search",type:"POST",dataType:"JSON",data:'{ "query":{"query_string":{"query":"'+e.term+'*"}}, "fields":["name","code"], "size":15, "highlight":{"fields":{"name":{}}} }',success:function(e){t($.map(e.hits.hits,function(e){return{label:e.highlight.name,value:e.fields.name,code:e.fields.code}}))}})},select:function(e,t){$(this.nextElementSibling).append("<li><i></i><span>"+t.item.value+"</span><b>"+t.item.code+"</b></li>")},close:function(e,t){this.value=""}}).data("ui-autocomplete")._renderItem=function(e,t){return $("<li></li>").data("item.autocomplete",t).append("<a>"+t.label+"</a>").appendTo(e)};$("#searche_filter_submit").click(function(){var e=[];var t=[];var n=[];$(".searche-nozologies li b").each(function(){t.push(this.innerHTML)});if(t.length){e["nozology"]=t.join("-")}$(".searche-contraindications li b").each(function(){n.push(this.innerHTML)});if(n.length){e["contra"]=n.join("-")}location.href=Routing.generate("searche",e)});$("ul.removable").on("click","li i",function(){$(this).parent("li").remove()});$("#searche_filter .searche-filter-title").click(function(){$("#searche_filter .searche-filter-content").slideToggle()})})